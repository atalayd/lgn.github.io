<!DOCTYPE HTML>
<html>

<head>
	<title>Legionnaires</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" />
	</noscript>

	<!-- Add styles directly to HTML or in your CSS file -->
	<style>
		/* Styling for server time input. */
		#server-time {
			background-color: #333;
			color: #fff;
			border: 1px solid #888;
			padding: 5px;
			font-size: 16px;
		}

		/* Hide menu button for logged-out users */
		.logged-out .menuToggle {
			display: block;
		}

		/* Show menu button for logged-in users */
		.logged-in .menuToggle {
			display: inline-block;
		}

		/* Styling for timezone selector */
		#timezone-selector {
			background-color: #333;
			color: #fff;
			border: 1px solid #888;
			padding: 5px;
			font-size: 16px;
			width: 100%;
		}

		/* Styling for the converted time display */
		#converted-time {
			font-size: 18px;
			color: #fff;
		}

		/* Styling for login and account modals */
		#login-modal,
		#create-account-modal {
			display: none;
			position: fixed;
			z-index: 1;
			padding-top: 100px;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgba(0, 0, 0, 0.5);
		}

		.modal-content {
			background-color: #857101;
			margin: auto;
			padding: 20px;
			border: 1px solid #888;
			width: 40%;
			position: relative;
		}

		/* Close button (X) for the login modal */
		.close-btn {
			position: absolute;
			top: 10px;
			right: 20px;
			color: #fff;
			font-size: 28px;
			font-weight: bold;
			cursor: pointer;
		}

		/* Hiding sections for non-logged-in users */
		.logged-out #ruins-section,
		.logged-out #elite-section,
		.logged-out #zombie-section {
			display: block;
		}

		/* Hiding login buttons when logged in */
		.logged-in .login-btn,
		.logged-in .login-section {
			display: none;
		}

		/* Ensure separation between menu items */
		#menu ul li {
			padding-bottom: 10px;
		}

		/* Styling for the success message */
		#login-success-message {
			display: none;
			background-color: #4CAF50;
			color: white;
			padding: 10px;
			position: fixed;
			bottom: 10px;
			right: 10px;
			z-index: 1000;
			border-radius: 5px;
		}
	</style>
</head>

<body class="landing is-preload logged-out" id="page-wrapper">

	<!-- Success Message Div -->
	<div id="login-success-message">Login successful!</div>

	<!-- Page Wrapper -->
	<div id="page-wrapper">

		<!-- Header -->
		<header id="header" class="alt">
			<h1><a href="index.html">Legionnaires</a></h1>
			<nav id="nav">
				<ul>
					<li class="special">
						<a href="#menu" class="menuToggle"><span>Menu</span></a>
						<div id="menu">
							<ul>
								<li><a href="index.html" class="home-btn">Home</a></li>
								<li><a href="generic.html" class="login-btn">Schedule</a></li>
								<li id="admin-tab" style="display: block;"><a href="Admins_R4_R5.html">Admins R4 -
										R5</a>
								</li>
								<li id="logout-btn" style="display: none;"><a href="#">Log Out</a></li>
							</ul>
						</div>
					</li>
				</ul>
			</nav>
		</header>

		<!-- Banner -->
		<section id="banner">
			<div class="inner">
				<h2>Legionnaires</h2>
				<p> Nation# 1209</p>
				<ul class="actions special login-section">
					<li><a href="#" class="button primary login-btn">Login</a></li>
				</ul>
			</div>
			<a href="#one" class="more scrolly">Learn More</a>
		</section>

		<!-- Section One with Server Time Converter -->
		<section id="one" class="wrapper style1 special">
			<div class="inner">
				<header class="major">
					<h2>Brave Warriors of Legionnaires<br />Welcome</h2>
					<p>Please login to see detailed information about upcoming events.<br />Check in daily!</p>
				</header>

				<!-- Server Time Converter Section -->
				<div>
					<h3>Server Time (UTC):</h3>
					<!-- Input for Server Time (24-hour format) -->
					<input type="time" id="server-time" value="23:00" step="60">

					<!-- Timezone Selector with Additional Time Zones -->
					<h3>Select Your Timezone:</h3>
					<select id="timezone-selector" size="6">
						<option value="Europe/Warsaw">Warsaw (Poland)</option>
						<option value="Europe/Moscow">Moscow (Russia)</option>
						<option value="Asia/Seoul">Seoul (South Korea)</option>
						<option value="Asia/Taipei">Taipei (Taiwan)</option>
						<option value="Asia/Shanghai">Shanghai (China)</option>
						<option value="Africa/Cairo">Cairo (Egypt)</option>
						<option value="America/New_York">Eastern Time (EST)</option>
						<option value="Europe/London">London (GMT)</option>
						<option value="Asia/Tokyo">Tokyo (JST)</option>
						<option value="Australia/Sydney">Sydney (AEST)</option>
						<option value="Europe/Berlin">Berlin (CET)</option>
					</select>

					<!-- Display Converted Time -->
					<h3>Your Local Time:</h3>
					<p id="converted-time">Select a timezone</p>
				</div>
			</div>
		</section>

		<!-- Section Two -->
		<section id="two" class="wrapper alt style2">
			<!-- Ruins Section -->
			<section id="ruins-section" class="spotlight">
				<div class="image">
					<img src="images1\Ruins.webp" alt="Ruins Battlefield" />
				</div>
				<div class="content">
					<h2>Ruins</h2>
					<p id="ruins-schedule">Ruins are every day at 14:00 server time.</p>
					<button id="ruins-edit-btn" onclick="editSchedule('ruins')">Edit</button>
					<input type="text" id="ruins-input" style="display:none;" placeholder="Update Ruins Schedule">
					<button id="ruins-save-btn" style="display:none;" onclick="saveSchedule('ruins')">Save</button>
				</div>
			</section>

			<!-- Elite Wars Section -->
			<section id="elite-section" class="spotlight">
				<div class="image">
					<img src="images1\Elite_wars.webp" alt="Elite Wars Battlefield" />
				</div>
				<div class="content">
					<h2>Elite Wars</h2>
					<p id="elite-schedule">Schedule: Elite Wars</p>
					<button id="elite-edit-btn" onclick="editSchedule('elite')">Edit</button>
					<input type="text" id="elite-input" style="display:none;" placeholder="Update Elite Wars Schedule">
					<button id="elite-save-btn" style="display:none;" onclick="saveSchedule('elite')">Save</button>
				</div>
			</section>

			<!-- Zombie Uprise Section -->
			<section id="zombie-section" class="spotlight">
				<div class="image">
					<img src="images1\Zombie_Uprise.webp" alt="Zombie Uprise Battlefield" />
				</div>
				<div class="content">
					<h2>Zombie Uprise</h2>
					<p id="zombie-schedule">Fridays at 14:00 server time.</p>
					<button id="zombie-edit-btn" onclick="editSchedule('zombie')">Edit</button>
					<input type="text" id="zombie-input" style="display:none;"
						placeholder="Update Zombie Uprise Schedule">
					<button id="zombie-save-btn" style="display:none;" onclick="saveSchedule('zombie')">Save</button>
				</div>
			</section>
		</section>

		<!-- Section Three -->
		<section id="three" class="wrapper style3 special">
			<div class="inner">
				<header class="major">
					<h2>LGN</h2>
					<p>LGN was founded on the principles of respect and friendship, with the goal of achieving
						cross-nation domination. We continue to grow stronger every day with new recruits and alliances.
					</p>
				</header>
				<ul class="features">
					<li class="icon fa-paper-plane">
						<h3>Reserved for Viber</h3>
						<p>Join the LGN Viber Group Chat.</p>
					</li>
					<li class="icon solid fa-laptop">
						<h3>Reserved</h3>
						<p>Reserved for future content.</p>
					</li>
				</ul>
			</div>
		</section>

		<!-- Call to Action (CTA) -->
		<section id="cta" class="wrapper style4">
			<div class="inner">
				<header>
					<h2 class="login-section">Login to see more</h2>
				</header>
				<ul class="actions stacked login-section">
					<li><a href="#" class="button fit primary login-btn">Login</a></li>
					<li><a href="#" class="button fit">Learn More</a></li>
				</ul>
			</div>
		</section>

		<!-- Footer -->
		<footer id="footer">
			<ul class="copyright">
				<li>&copy; LGN Website</li>
				<li>Design: <a href="#">Mystic</a></li>
			</ul>
		</footer>

	</div>

	<!-- Login Modal (Hidden by Default) -->
	<div id="login-modal">
		<div class="modal-content">
			<span class="close-btn" onclick="closeModal()">×</span> <!-- Close button -->
			<h2>Login</h2>
			<form id="login-form">
				<label for="username">Username:</label>
				<input type="text" id="username" required>

				<label for="password">Password:</label>
				<input type="password" id="password" required>

				<button type="submit">Log In</button>
			</form>
			<p>Don't have an account? <a href="#" id="create-account-link">Create one</a></p>
		</div>
	</div>

	<!-- Create Account Modal (Hidden by Default) -->
	<div id="create-account-modal">
		<div class="modal-content">
			<span class="close-btn" onclick="closeModal()">×</span> <!-- Close button -->
			<h2>Create an Account</h2>
			<form id="create-account-form">
				<label for="new-username">Username:</label>
				<input type="text" id="new-username" required>

				<label for="new-password">Password (letters and numbers only):</label>
				<input type="password" id="new-password" required>

				<label for="confirm-password">Confirm Password:</label>
				<input type="password" id="confirm-password" required>

				<button type="submit">Create Account</button>
			</form>
		</div>
	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.scrollex.min.js"></script>
	<script src="assets/js/jquery.scrolly.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

	<!-- Time Zone Conversion Script and Login Script -->
	<script>
		// Time Zone Conversion Logic
		const serverTimeInput = document.getElementById("server-time");
		const timezoneSelector = document.getElementById("timezone-selector");
		const convertedTimeDisplay = document.getElementById("converted-time");

		timezoneSelector.addEventListener("change", () => {
			const selectedTimezone = timezoneSelector.value;
			const serverTimeValue = serverTimeInput.value.split(":");

			const serverDate = new Date();
			serverDate.setUTCHours(serverTimeValue[0], serverTimeValue[1], 0); // Set seconds to 0 explicitly

			const formattedTime = new Intl.DateTimeFormat('en-US', {
				timeZone: selectedTimezone,
				hour: '2-digit',
				minute: '2-digit',
				hour12: false
			}).format(serverDate);

			convertedTimeDisplay.textContent = `Local Time: ${formattedTime}`;
		});

		// Modal handling
		const loginModal = document.getElementById('login-modal');
		const createAccountModal = document.getElementById('create-account-modal');
		const loginButtons = document.querySelectorAll('.login-btn');

		// loginButtons.forEach(button => {
		// 	button.addEventListener('click', () => {
		// 		loginModal.style.display = 'block';
		// 	});
		// });

		function closeModal() {
			loginModal.style.display = 'none';
			createAccountModal.style.display = 'none';
		}

		document.getElementById('create-account-link').addEventListener('click', () => {
			loginModal.style.display = 'none';
			createAccountModal.style.display = 'block';
		});
		/*
				// Handle login with Firebase
				document.getElementById('login-form').addEventListener('submit', async function (e) {
					e.preventDefault();
					const username = document.getElementById('username').value;
					const password = document.getElementById('password').value;
		
					try {
						const response = await fetch('https://us-central1-lgn-website-1d982.cloudfunctions.net/loginUser', {
							method: 'POST',
							headers: {
								'Content-Type': 'application/json'
							},
							body: JSON.stringify({ username, password })
						});
		
						if (response.ok) {
							document.getElementById('page-wrapper').classList.remove('logged-out');
							document.getElementById('page-wrapper').classList.add('logged-in');
							document.getElementById('admin-tab').style.display = 'inline';
							loginModal.style.display = 'none';
		
							const loginSuccessMessage = document.getElementById('login-success-message');
							loginSuccessMessage.style.display = 'block';
							setTimeout(() => {
								loginSuccessMessage.style.display = 'none';
							}, 3000);
		
							document.querySelectorAll('.login-section').forEach(el => el.style.display = 'none');
							document.querySelector('#logout-btn').style.display = 'block';
							document.querySelector('.menuToggle').style.display = 'inline-block';
							localStorage.setItem('loggedIn', 'true');
						} else {
							alert("Incorrect credentials!");
						}
					} catch (error) {
						console.error('Error logging in:', error);
						alert("Login failed.");
					}
				});
		*/
		// Handle account creation with Firebase
		document.getElementById('create-account-form').addEventListener('submit', async function (e) {
			e.preventDefault();
			const newUsername = document.getElementById('new-username').value;
			const newPassword = document.getElementById('new-password').value;
			const confirmPassword = document.getElementById('confirm-password').value;

			if (newPassword !== confirmPassword) {
				alert("Passwords do not match.");
				return;
			}

			try {
				const response = await fetch('https://us-central1-lgn-website-1d982.cloudfunctions.net/registerUser', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify({ username: newUsername, password: newPassword })
				});

				if (response.ok) {
					alert("Account creation request sent for admin approval.");
					createAccountModal.style.display = 'none';
				} else {
					alert("Account creation failed.");
				}
			} catch (error) {
				console.error('Error creating account:', error);
				alert("Account creation failed.");
			}
		});
		/*
				// Handle logout
				document.getElementById('logout-btn').addEventListener('click', function () {
					document.getElementById('page-wrapper').classList.remove('logged-in');
					document.getElementById('page-wrapper').classList.add('logged-out');
					document.getElementById('admin-tab').style.display = 'none';
					alert("Logged out!");
		
					document.querySelectorAll('.login-section').forEach(el => el.style.display = 'block');
					document.querySelector('#logout-btn').style.display = 'none';
					document.querySelector('.menuToggle').style.display = 'none';
					localStorage.removeItem('loggedIn');
				});
				*/
		/*
				// window.onload = function () {
				// 	if (localStorage.getItem('loggedIn') === 'true') {
				// 		document.getElementById('page-wrapper').classList.remove('logged-out');
				// 		document.getElementById('page-wrapper').classList.add('logged-in');
				// 		document.getElementById('admin-tab').style.display = 'inline';
				// 		document.querySelectorAll('.login-section').forEach(el => el.style.display = 'none');
				// 		document.querySelector('#logout-btn').style.display = 'block';
				// 		document.querySelector('.menuToggle').style.display = 'inline-block';
				// 	} else {
				// 		document.querySelector('.menuToggle').style.display = 'none';
				// 	}
				// };
		*/
	</script>

</body>

</html>